# 方塊數獨遊戲 - 產品需求規格書 (PRD)

## 1. 遊戲概述

### 1.1 遊戲名稱
方塊數獨 (Block Sudoku / Block Blast)

### 1.2 遊戲類型
益智拼圖遊戲

### 1.3 遊戲目標
拖曳不同形狀的方塊到8x8棋盤上，填滿整行或整列即可消除得分，獲得最高分數。

### 1.4 目標玩家
- 喜歡益智遊戲的玩家
- 尋求策略思考挑戰的用戶
- 各年齡層的拼圖愛好者

## 2. 遊戲功能

### 2.1 核心遊戲機制
1. **方塊拖曳**: 拖曳方塊到棋盤上的合適位置
2. **放置驗證**: 檢查方塊是否可以放置在選定位置
3. **行列消除**: 填滿整行或整列時消除該行/列
4. **分數計算**: 根據放置和消除計算得分

### 2.2 遊戲控制
- **滑鼠控制**: 拖曳放置方塊
- **觸控控制**: 移動設備觸控拖曳
- **按鈕控制**:
  - 開始遊戲按鈕
  - 重新開始按鈕
  - 提示按鈕
  - 旋轉方塊按鈕

### 2.3 遊戲狀態
- **準備狀態**: 遊戲開始前，顯示初始方塊
- **進行狀態**: 遊戲進行中，可拖曳放置方塊
- **提示狀態**: 顯示建議放置位置
- **結束狀態**: 無可用放置位置時遊戲結束

## 3. 技術規格

### 3.1 開發技術
- **HTML5**: 遊戲頁面結構
- **CSS3**: 響應式設計與動畫效果
- **JavaScript**: 遊戲邏輯與拖曳互動
- **Canvas API**: 棋盤與方塊渲染

### 3.2 性能要求
- **拖曳響應**: 拖曳延遲 < 50ms
- **動畫流暢**: 60 FPS 動畫效果
- **計算效率**: 放置驗證計算 < 10ms

### 3.3 儲存功能
- **本地儲存**: localStorage儲存最高分數
- **遊戲進度**: 自動保存當前遊戲狀態
- **設定儲存**: 保存用戶偏好設定

## 4. 遊戲元素設計

### 4.1 棋盤系統
- **尺寸**: 8x8 方格棋盤
- **方格大小**: 45x45 像素
- **視覺風格**: 深色背景與網格線
- **互動區域**: 明確的放置區域指示

### 4.2 方塊設計
- **方塊類型**: 10種不同形狀的方塊
- **形狀包括**: 單一方塊、2x2方塊、L型、T型、直條、橫條等
- **顏色方案**: 每種形狀有獨特色彩
- **視覺效果**: 發光邊框與陰影效果

### 4.3 方塊池系統
- **同時顯示**: 每次顯示3種不同方塊
- **隨機生成**: 遊戲進行中隨機生成新方塊
- **預覽功能**: 顯示方塊形狀與顏色預覽

## 5. 用戶界面設計

### 5.1 遊戲畫面佈局
1. **遊戲標題區**: 遊戲名稱與簡介
2. **數據統計區**: 分數、最高分、等級、放置次數
3. **棋盤區域**: 8x8遊戲棋盤
4. **方塊選擇區**: 當前可用方塊顯示
5. **控制按鈕區**: 遊戲控制按鈕

### 5.2 視覺設計元素
- **棋盤背景**: 深藍色漸層背景
- **網格線**: 半透明網格輔助線
- **方塊效果**: 發光、陰影、高光效果
- **狀態提示**: 顏色編碼的狀態指示

### 5.3 響應式設計
- **桌面版**: 完整功能與滑鼠控制
- **平板版**: 優化觸控與界面佈局
- **手機版**: 簡化界面與觸控優化

## 6. 遊戲規則與得分系統

### 6.1 基本規則
1. 方塊必須完全在棋盤範圍內
2. 方塊不能與已有方塊重疊
3. 方塊放置後不可移動
4. 當無可用放置位置時遊戲結束

### 6.2 消除規則
1. **行消除**: 填滿整行8個方格
2. **列消除**: 填滿整列8個方格
3. **同時消除**: 行和列同時填滿時
4. **連鎖消除**: 消除後可能觸發新的消除

### 6.3 得分系統
1. **放置得分**: 根據方塊大小計算基礎分數
2. **消除得分**: 每消除一行/列獲得100分
3. **連擊獎勵**: 同時消除多行/列獲得額外獎勵
4. **等級倍率**: 高等級獲得分數倍率加成

### 6.4 等級系統
- **升級條件**: 每放置10個方塊提升1級
- **等級效果**: 高等級獲得更高分數倍率
- **視覺反饋**: 升級時特殊效果提示

## 7. 特殊功能

### 7.1 提示系統
- **自動提示**: 顯示最佳放置位置
- **視覺提示**: 高亮顯示建議位置
- **限制使用**: 提示功能有使用限制

### 7.2 方塊旋轉
- **旋轉功能**: 可旋轉當前選中方塊
- **旋轉動畫**: 平滑的旋轉過渡動畫
- **預覽更新**: 旋轉後更新方塊預覽

### 7.3 視覺效果
- **放置效果**: 方塊放置時的動畫效果
- **消除效果**: 行列消除時的爆炸效果
- **得分效果**: 得分數字彈出動畫
- **連擊效果**: 連擊時的特殊視覺效果

## 8. 音效設計

### 8.1 音效類型
- **放置音效**: 方塊放置成功音效
- **消除音效**: 行列消除音效
- **提示音效**: 使用提示功能音效
- **按鈕音效**: 按鈕點擊反饋音效
- **遊戲結束音效**: 遊戲結束提示音

### 8.2 音效設定
- **音量控制**: 可調整音效音量
- **開關控制**: 可開啟/關閉音效
- **環境音效**: 可選的背景音樂

## 9. 設備相容性

### 9.1 瀏覽器支援
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 9.2 輸入設備
- **滑鼠**: 完整拖曳功能
- **觸控屏**: 多點觸控支援
- **鍵盤**: 輔助鍵盤控制（未來擴展）

### 9.3 屏幕尺寸支援
- **最小尺寸**: 320x480像素
- **推薦尺寸**: 768x1024像素以上
- **橫屏模式**: 橫屏時優化佈局

## 10. 可訪問性設計

### 10.1 視覺輔助
- 高對比度顏色方案
- 清晰的大小與形狀區分
- 明確的狀態視覺提示

### 10.2 操作輔助
- 足夠大的觸控目標
- 拖曳操作的視覺反饋
- 錯誤操作的明確提示

## 11. 測試要求

### 11.1 功能測試
- 方塊拖曳與放置功能
- 消除檢測與計算
- 分數計算準確性
- 遊戲狀態管理

### 11.2 性能測試
- 拖曳響應性能
- 動畫流暢度測試
- 記憶體使用監控
- 載入時間測試

### 11.3 兼容性測試
- 跨瀏覽器功能測試
- 不同設備觸控測試
- 屏幕尺寸適應測試

## 12. 未來擴展

### 12.1 遊戲模式擴展
1. **限時模式**: 時間限制內獲得最高分
2. **無限模式**: 無遊戲結束條件
3. **挑戰模式**: 特定目標挑戰關卡
4. **多人模式**: 實時對戰或比分競爭

### 12.2 功能擴展
1. **方塊庫系統**: 收集不同方塊皮膚
2. **成就系統**: 完成特定目標獲得成就
3. **每日挑戰**: 每日特殊挑戰任務
4. **社交功能**: 分享成績與挑戰朋友

### 12.3 內容擴展
1. **更多方塊形狀**: 增加方塊種類
2. **特殊方塊**: 具有特殊效果的方塊
3. **主題皮膚**: 不同視覺主題選擇
4. **音效包**: 可選音效主題

## 13. 開發時程

### 階段1: 核心功能 (已完成)
- [x] 基本棋盤與方塊系統
- [x] 拖曳放置功能
- [x] 消除檢測邏輯
- [x] 基本得分系統

### 階段2: 增強功能 (進行中)
- [ ] 提示系統實現
- [ ] 旋轉功能完善
- [ ] 視覺效果增強
- [ ] 音效系統添加

### 階段3: 優化測試 (計劃中)
- [ ] 性能優化
- [ ] 兼容性測試
- [ ] 用戶體驗測試
- [ ] 錯誤修復與調整

## 14. 成功指標

### 14.1 技術指標
- 遊戲載入時間 < 3秒
- 拖曳響應延遲 < 50ms
- 零遊戲邏輯錯誤

### 14.2 用戶指標
- 平均遊戲時間 > 5分鐘
- 提示功能使用率 > 20%
- 用戶回訪率 > 35%

### 14.3 遊戲平衡指標
- 平均遊戲長度: 10-15分鐘
- 最高分合理範圍: 5000-10000分
- 等級進度合理曲線

---

**文件版本**: 1.0  
**創建日期**: 2026-02-13  
**最後更新**: 2026-02-13  
**相關文件**: `block blash.html`, `PRD.md`  
**負責人**: wengcheng